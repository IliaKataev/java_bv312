<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.com">
<head>
    <meta charset="UTF-8">
    <title>LEGO CITY</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css">
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>

<div class="container my-5">
    <h1 class="text-center mb-4">Lego City</h1>

    <!-- CITY -->
    <div class="card city-card mb-4">
        <div class="card-body">
            <h4>–°–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ—Ä–æ–¥–∞</h4>
            <p>–ö—É–±–∏–∫–∏: <b th:text="${city.cubes}"></b></p>
            <p>–õ–∏–º–∏—Ç –∑–¥–∞–Ω–∏–π: <b th:text="${city.maxBuildings}"></b></p>
        </div>
    </div>

    <!-- BUILDINGS -->

    <h4 class="mb-3">–ü–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∑–¥–∞–Ω–∏—è</h4>

    <div class="row">
        <div class="col-md-3 mb-3"
        th:each="b : ${buildings}">
            <div class="building-card">
                <img th:src="@{/icons/{icon}(icon=${b.type.icon})}" alt="#">
                <div th:text="${b.type.name}"></div>
                <div th:text="${#temporals.format(b.builtAt, 'dd.MM.yyyy HH:mm')}"></div>
            </div>

        </div>

        <div class="buildings-panel">
            <div th:each="t : ${types}" class="building-card">
                <img th:src="@{/icons/{icon}(icon=${t.icon})}" alt="#">
                <div th:text="${t.name}"></div>
                <p>–¶–µ–Ω–∞: <span th:text="${t.cubeCost}"></span> üß±</p>

                <form th:action="@{/city/build/(id=${t.id})}" method="post">
                    <input type="hidden" name="Id" th:value="${t.id}">
                    <button type="submit">Build</button>
                </form>
            </div>
        </div>
    </div>

    <!-- MISSIONS -->
    <h4 class="mt-5 mb-3">–ú–∏—Å—Å–∏–∏</h4>

    <div class="card mb2"
    th:each="m : ${missions}"
    th:classappend="${m.completed} ? 'mission-done'">

        <div class="card-body">
            <b>–ú–∏—Å—Å–∏—è ‚Ññ<span th:text="${m.id}"></span></b>
            <ul>
                <li th:each="r : ${m.requirementsList}">
                    –ü–æ—Å—Ç—Ä–æ–∏—Ç—å <b th:text="${r.buildingType.name}"></b>
                    x <b th:text="${r.requiredCount}"></b>
                </li>
            </ul>

            –ù–∞–≥—Ä–∞–¥–∞:
            <span th:text="${m.rewardCubes}"></span> üß±,
            <span th:text="${m.rewardMaxBuildings}"></span> üè†
        </div>

    </div>

</div>

</body>
</html>